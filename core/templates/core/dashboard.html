{% extends 'core/base.html' %}

{% block content %}
<div class="w-full max-w-4xl mx-auto px-4 pb-20">
    
    <!-- Field Header -->
    <div class="flex items-center justify-between mb-8">
        <div>
            <h1 class="font-display font-extrabold text-3xl sm:text-4xl text-white tracking-tight">
                Yo Boss. üëã
            </h1>
            <p class="text-brand-200 text-sm font-medium mt-1">Here's the scoop for today.</p>
        </div>
        <div class="flex items-center gap-2 bg-emerald-500/10 border border-emerald-500/20 px-3 py-1.5 rounded-lg">
            <span class="relative flex h-3 w-3">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-3 w-3 bg-emerald-500"></span>
            </span>
            <span class="text-xs font-bold text-emerald-400 uppercase tracking-wide">System Live</span>
        </div>
    </div>

    <!-- Sky Watch (Weather) -->
    <div class="bg-slate-800/50 backdrop-blur-md border border-white/10 rounded-2xl p-6 mb-6">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xs font-bold uppercase tracking-widest text-slate-400">Sky Watch</h2>
            <span class="text-xs text-brand-400 font-bold">{{ season|upper }} MODE</span>
        </div>
        <div class="flex items-center gap-6">
            <div class="text-5xl">üå®Ô∏è</div> <!-- Dynamic based on API ideally -->
            <div>
                <p class="text-2xl font-bold text-white">Snowing?</p>
                <p class="text-sm text-slate-300">
                    {% if season == 'winter' %}
                        Yep, looks like it. <span class="text-white font-bold">Get ready.</span>
                    {% else %}
                        Nah, clear skies. <span class="text-white font-bold">Chill out.</span>
                    {% endif %}
                </p>
            </div>
        </div>
    </div>

    <!-- The Big Red Button (Route Optimizer) -->
    <div class="mb-8">
        <button 
            onclick="location.href='/scheduling/optimize/'" 
            class="w-full group relative overflow-hidden bg-brand-600 hover:bg-brand-500 active:scale-[0.98] transition-all duration-200 rounded-2xl p-6 text-left shadow-2xl shadow-brand-500/20"
        >
            <div class="absolute top-0 right-0 p-6 opacity-20 group-hover:scale-110 transition-transform">
                <svg class="w-24 h-24 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0121 18.382V7.618a1 1 0 01-.553-.894L15 7m0 13V7" /></svg>
            </div>
            <div class="relative z-10">
                <h3 class="text-2xl font-bold text-white mb-1">Fix My Route üöÄ</h3>
                <p class="text-brand-100 text-sm font-medium">Crunch the numbers and give me the fastest path.</p>
            </div>
        </button>
    </div>

    <!-- The Stats Grid -->
    <div class="grid grid-cols-2 gap-4 mb-8">
        <!-- Revenue -->
        <div class="bg-slate-800/50 border border-white/5 rounded-2xl p-5">
            <h3 class="text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-2">The Bag üí∞</h3>
            <p class="text-2xl sm:text-3xl font-display font-bold text-white">$12.4k</p>
            <p class="text-xs text-emerald-400 mt-1 font-bold">+ $800 this week</p>
        </div>

        <!-- Leads -->
        <div class="bg-slate-800/50 border border-white/5 rounded-2xl p-5">
            <h3 class="text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-2">Kickin' Tires üëÄ</h3>
            <p class="text-2xl sm:text-3xl font-display font-bold text-white">{{ leads }}</p>
            <p class="text-xs text-brand-400 mt-1 font-bold">New people lookin'</p>
        </div>
    </div>

    <!-- The Daily Grind (Route List) -->
    <div class="bg-slate-800/50 border border-white/10 rounded-2xl overflow-hidden">
        <div class="p-6 border-b border-white/5 flex justify-between items-center">
            <h2 class="text-lg font-bold text-white">The Daily Grind</h2>
            <span class="text-xs bg-slate-700 text-white px-2 py-1 rounded">Sorted by Speed</span>
        </div>
        
        <div class="divide-y divide-white/5">
            <!-- Loop through clients (Mockup if empty, backend should fill this) -->
            {% for client in clients %}
            <div class="p-4 flex items-center justify-between hover:bg-white/5 transition-colors cursor-pointer" onclick="window.open('https://maps.google.com/?q={{ client.address }}', '_blank')">
                <div class="flex items-center gap-4">
                    <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold text-white">
                        {{ forloop.counter }}
                    </div>
                    <div>
                        <p class="font-bold text-white text-sm">{{ client.address }}</p>
                        <p class="text-xs text-slate-400">{{ client.name }} ‚Ä¢ <span class="text-emerald-400">{{ client.subscription_plan|title }}</span></p>
                    </div>
                </div>
                <div class="text-brand-400">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0121 18.382V7.618a1 1 0 01-.553-.894L15 7m0 13V7" /></svg>
                </div>
            </div>
            {% empty %}
            <div class="p-8 text-center text-slate-500 text-sm">
                No active jobs right now. Go have a coffee. ‚òï
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- The Fam (Quick Client List) -->
    <div class="mt-8">
        <h2 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-4">The Fam (All Clients)</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <button onclick="location.href='/crm/'" class="bg-slate-800/30 hover:bg-slate-800 text-white p-4 rounded-xl border border-white/5 text-left transition-colors">
                <span class="block font-bold text-sm">See Full List</span>
                <span class="text-xs text-slate-500">Manage subscriptions & details</span>
            </button>
            <button onclick="location.href='/marketing/create/'" class="bg-slate-800/30 hover:bg-slate-800 text-white p-4 rounded-xl border border-white/5 text-left transition-colors">
                <span class="block font-bold text-sm">Blast an Email</span>
                <span class="text-xs text-slate-500">Tell 'em we're coming</span>
            </button>
        </div>
    </div>

</div>
{% endblock %}